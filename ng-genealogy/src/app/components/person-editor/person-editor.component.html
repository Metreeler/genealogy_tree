<div class="editor">
  @if (servicePerson()) {
  <div class="flex-row">
    <div class="close-button" (click)="onClicked()">&#8680;</div>
    <div class="flex-column fields container">
      <button
        (click)="onSureDeleteClicked()"
        class="btn btn-warning mb-1"
        [hidden]="deletionWanted()"
      >
        SURE TO DELETE
      </button>

      <div class="d-flex gap-2 mb-1">
        <div class="flex-grow-1">
          <label class="form-label small">Name</label>
          <input
            class="form-control form-control-sm"
            type="text"
            (focusout)="saveData()"
            (input)="onDataUpdated()"
            [(ngModel)]="person.name"
            placeholder="Enter name"
          />
        </div>

        <div class="flex-grow-1">
          <label class="form-label small">Surname</label>
          <input
            class="form-control form-control-sm"
            type="text"
            (focusout)="saveData()"
            (input)="onDataUpdated()"
            [(ngModel)]="person.surname"
            placeholder="Enter surname"
          />
        </div>
      </div>

      <!-- Birth date and city -->
      <div class="d-flex gap-2 mb-1">
        <div class="flex-grow-1">
          <label class="form-label small">Birth date</label>
          <input
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.birth"
          />
        </div>
        <div class="flex-grow-1">
          <label class="form-label small">Birth city</label>
          <input
            list="my-city-list"
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.birth_city"
          />
        </div>
      </div>

      <!-- Wedding date and city -->
      <div class="d-flex gap-2 mb-1">
        <div class="flex-grow-1">
          <label class="form-label small">Wedding date</label>
          <input
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.wedding"
          />
        </div>
        <div class="flex-grow-1">
          <label class="form-label small">Wedding city</label>
          <input
            list="my-city-list"
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.wedding_city"
          />
        </div>
      </div>

      <!-- Death date and city -->
      <div class="d-flex gap-2 mb-1">
        <div class="flex-grow-1">
          <label class="form-label small">Death date</label>
          <input
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.death"
          />
        </div>
        <div class="flex-grow-1">
          <label class="form-label small">Death city</label>
          <input
            list="my-city-list"
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.death_city"
          />
        </div>
      </div>

      <!-- Job and Address -->
      <div class="d-flex gap-2 mb-1">
        <div class="flex-grow-1">
          <label class="form-label small">Job</label>
          <input
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.job"
          />
        </div>
        <div class="flex-grow-1">
          <label class="form-label small">Address</label>
          <input
            list="my-city-list"
            class="form-control form-control-sm"
            type="text"
            [(ngModel)]="person.address"
          />
        </div>
      </div>

      <!-- Show parents checkbox -->
      <div class="mb-1 form-check">
        <input
          class="form-check-input"
          type="checkbox"
          [(ngModel)]="person.show_parent"
          id="showParentsCheck"
        />
        <label class="form-check-label small" for="showParentsCheck"
          >Show parents</label
        >
      </div>

      <!-- Notes textarea -->
      <div class="mb-1">
        <label class="form-label small">Notes</label>
        <textarea
          class="form-control form-control-sm"
          [(ngModel)]="person.notes"
          rows="2"
        ></textarea>
      </div>

      <datalist id="my-city-list">
        @for (city of cities(); track city) {
        <option>{{ city }}</option>
        }
      </datalist>

      <div class="button-container">
        <div class="d-grid gap-1 mb-1">
          <button (click)="onDeleteClicked()" class="btn btn-danger btn-sm">
            DELETE
          </button>
        </div>

        <div class="d-flex justify-content-between">
          @if (!hasFather()) {
          <button
            class="btn btn-outline-secondary btn-sm"
            (click)="onAddParentClicked(true)"
          >
            Add father
          </button>
          } @else {
          <div></div>
          } @if (!hasMother()) {
          <button
            class="btn btn-outline-secondary btn-sm"
            (click)="onAddParentClicked(false)"
          >
            Add mother
          </button>
          } @else {
          <div></div>
          }
        </div>
      </div>
    </div>
  </div>
  }
</div>
